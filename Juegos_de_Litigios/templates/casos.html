{% extends "base.html" %}
{% block title %}Casos {{ tabla.replace('casos_', '') | capitalize }}{% endblock %}
{% block content %}
<header class="py-3 text-white text-center position-relative overflow-hidden" style="background: linear-gradient(135deg, #003087 0%, #0055a4 50%, #CE1126 100%);">
    <div class="container position-relative z-1">
        <h1 class="fw-bold fs-3 mb-1" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
            <i class="fas fa-briefcase me-2"></i>Casos {{ tabla.replace('casos_', '') | capitalize }}
        </h1>
        <p class="fs-6 mb-0">Elige un caso para resolver o jugar en multijugador</p>
    </div>
    <div class="position-absolute top-0 start-0 w-100 h-100 opacity-10" style="background: url('https://www.transparenttextures.com/patterns/wood-pattern.png');"></div>
</header>

<div class="container my-3">
    <div class="row g-3">
        {% for caso in casos %}
        <div class="col-md-4">
            <div class="card shadow-sm border-0">
                <div class="card-body p-3">
                    <h5 class="card-title fw-bold fs-5">{{ caso.titulo }}</h5>
                    <p class="card-text text-muted fs-6">{{ caso.hechos | truncate(100) }}</p>
                    <span class="badge bg-{{ 'success' if caso.dificultad <= 3 else 'warning' if caso.dificultad <= 7 else 'danger' }} mb-2">
                        Dificultad: {{ caso.dificultad }}/10 ({{ "Fácil" if caso.dificultad <= 3 else "Medio" if caso.dificultad <= 7 else "Difícil" }})
                    </span>
                    <form action="{{ url_for('caso', tabla=tabla, caso_id=caso.id) }}" method="GET">
                        <div class="mb-2">
                            <label for="rol-{{ caso.id }}" class="form-label fw-bold text-dark fs-6">Rol</label>
                            <select name="rol" id="rol-{{ caso.id }}" class="form-select shadow-sm" required>
                                <option value="Fiscal">Fiscal</option>
                                <option value="Defensor">Defensor</option>
                            </select>
                        </div>
                        <div class="d-flex justify-content-between">
                            <button type="submit" class="btn btn-primary btn-sm shadow-sm">
                                <i class="fas fa-play me-2"></i>Jugar Solo
                            </button>
                            <a href="{{ url_for('caso_multi', tabla=tabla, caso_id=caso.id) }}" class="btn btn-outline-primary btn-sm shadow-sm">
                                <i class="fas fa-users me-2"></i>Multijugador
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-3">
        <a href="{{ url_for('inicio') }}" class="btn btn-outline-secondary shadow-sm">
            <i class="fas fa-arrow-left me-2"></i>Volver al Inicio
        </a>
    </div>
</div>

<style>
    .card-body { padding: 1rem !important; }
    .btn-outline-primary:hover { background-color: #003087; color: white; }
</style>
{% endblock %}
